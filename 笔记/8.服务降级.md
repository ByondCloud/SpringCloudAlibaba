## 慢调用

以慢调用数量的比例作为阈值

首先判断每个请求处理的时长是否大于【RT】，大于就判断为慢连接

当【统计时长】内的请求数大于【最小请求数】，并且超过了【比例阈值】，就会触发熔断

超过【熔断时长】就会进入半熔断状态，当下一个请求响应时间小于【RT】，则恢复，否则继续熔断

![image-20230416135449820](image/8.%E6%9C%8D%E5%8A%A1%E9%99%8D%E7%BA%A7/image-20230416135449820.png)

当处理请求时长超过了1秒，就判定为慢连接，假如1秒内进了6个请求，其中4个请求处理时间都超过了1秒，则触发熔断，等待5秒后进入半熔断状态，下一个请求进来处理没有超过1秒则恢复

### 异常比例

![image-20230416135950298](image/8.%E6%9C%8D%E5%8A%A1%E9%99%8D%E7%BA%A7/image-20230416135950298.png)

这比上面那个简单，10秒内异常的比例超过了就50%就熔断

异常就是trycatch的那个异常

### 异常数

就是把上面的比例变成数目

